<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <title></title>
  <link href="../Css/frame.css" rel="stylesheet" type="text/css" />
  <link href="../Css/jquery-ui-latest.custom.css" rel="stylesheet" type="text/css" />
  <link href="../Css/jquery-ui-enhanced.css" rel="stylesheet" type="text/css" />
  <link href="../Css/slick.columnpicker.css" rel="stylesheet" type="text/css" />
  <link href="../Css/slick.grid.css" rel="stylesheet" type="text/css" />
  <link href="../Css/slick.pager.css" rel="stylesheet" type="text/css" />
  <link href="../Css/ts.ui.css" rel="stylesheet" type="text/css" />
  <!--[if IE 7]><link href="Resources_151/Css/ts.ui.ie7.css" rel="stylesheet" type="text/css" /><![endif]-->
  <!--[if IE 8]><link href="Resources_151/Css/ts.ui.ie8.css" rel="stylesheet" type="text/css" /><![endif]-->
  <style type="text/css">
    .utils-content { border: none; overflow: auto; height: 100%; }
    .utils-content-wrapper { padding: 2em 2em; }
    #divServices table { border-spacing: 1em; border-collapse:inherit;}
  </style>

  <script src="../Js/jquery-1.5.1.min.js" type="text/javascript"></script>
  <script src="../Js/jquery-ui-1.8.14.custom.min.js" type="text/javascript"></script>
  <script src="../Js/jquery.rule-1.0.1-min.js" type="text/javascript"></script>
  <script src="../Js/jquery.event.drag-2.0.min.js" type="text/javascript"></script>
  <script src="../Js/jquery.event.drop-2.0.min.js" type="text/javascript"></script>
  <script src="../Js/slick.grid.js" type="text/javascript"></script>
  <script src="../Js/slick.columnpicker.js" type="text/javascript"></script>
  <script src="../Js/slick.editors.js" type="text/javascript"></script>
  <script src="../Js/slick.pager.js" type="text/javascript"></script>
  <script language="javascript" type="text/javascript">

    $(document).ready(function () {
      $('button').button();

      $('#btnRefresh').click(function (e) {
        e.preventDefault();
        window.location = window.location;
      });

      function loadServices() {
        top.Ts.Services.System.GetServices(function (services) {
          var table = $('<table>'); 
          var head = $('<tr>').appendTo($('<thead>').appendTo(table));
          for (prop in services[0]) {
            if (prop.indexOf('__') > -1) continue;
            $('<th>').text(prop).appendTo(head);
          }

          var body = $('<tbody>').appendTo(table);
          for (var i = 0; i < services.length; i++) {
            var row = $('<tr>').appendTo(body);
            var service = services[i];
            for (prop in service) {
              if (prop.indexOf('__') > -1) continue;
              $('<td>').appendTo(row).text(service[prop] == null ? 'NULL' : service[prop] + '');
            }
          }

          var div = $('#divServices').empty().append(table);
          $('<h3>').text('Last Updated: ' + (new Date()).toString()).appendTo(div);

        });

      }

      loadServices();
      setInterval(loadServices, 3500);
    });  
  </script>

</head>
<body>
  <div class="utils-content ui-widget ui-widget-content">
    <div class="ts-toolbar ui-widget-header">
      <button id="btnRefresh">Refresh</button>
    </div>
    <div class="utils-content-wrapper">
      <h1>Services</h1>
      <div id="divServices"></div>
    </div>
  </div>
</body>
</html>
